<div class="background-container"></div>

<script>
  var TopicListComponent = require('discourse/components/topic-list').default;
  TopicListComponent.reopen({
    showLikes: true
  });
</script>

<script type="text/x-handlebars" data-template-name="topic-list-header.raw">
  {{~raw-plugin-outlet name="topic-list-header-before"~}}
  {{#if bulkSelectEnabled}}
    <th class="bulk-select">
      {{#if canBulkSelect}}
        {{raw "flat-button" class="bulk-select" icon="list" title="topics.bulk.toggle"}}
      {{/if}}
    </th>
  {{/if}}
  {{raw "topic-list-header-column" order='default' name=listTitle bulkSelectEnabled=bulkSelectEnabled showBulkToggle=toggleInTitle canBulkSelect=canBulkSelect}}
  {{#if showPosters}}
    {{raw "topic-list-header-column" order='posters' ariaLabel=(i18n "category.sort_options.posters")}}
  {{/if}}
  {{raw "topic-list-header-column" sortable=sortable number='true' order='posts' name='replies'}}
  {{#if showLikes}}
    {{raw "topic-list-header-column" sortable=sortable number='true' order='likes' name='likes'}}
  {{/if}}
  {{#if showOpLikes}}
    {{raw "topic-list-header-column" sortable=sortable number='true' order='op_likes' name='likes'}}
  {{/if}}
  {{~raw-plugin-outlet name="topic-list-header-after"~}}
</script>

<script type="text/x-handlebars" data-template-name="list/topic-list-item.raw">
  {{#if bulkSelectEnabled}}
    <td class="bulk-select">
      <input type="checkbox" class="bulk-select">
    </td>
  {{/if}}

  {{!--
  The `~` syntax strip spaces between the elements, making it produce
  `<a class=topic-post-badges>Some text</a><span class=topic-post-badges>`,
  with no space between them.
  This causes the topic-post-badge to be considered the same word as "text"
  at the end of the link, preventing it from line wrapping onto its own line.
--}}
  <td class='main-link clearfix' colspan="1" role="rowheader">
    <div class="topic-wrapper">
      <div class="poster-image">
        <a href="{{topic.posters.[0].user.userPath}}" data-user-card="{{topic.posters.[0].user.username}}">{{avatar topic.posters.[0].user imageSize='small'}}</a>
        {{~raw-plugin-outlet name="topic-list-before-link"}}
      </div>
      <div class="topic-details">
        <span class='link-top-line'>
          {{~raw-plugin-outlet name="topic-list-before-status"}}
          {{~raw "topic-status" topic=topic}}
          {{~topic-link topic class="raw-link raw-topic-link"}}
          {{~#if topic.featured_link}}
          {{~topic-featured-link topic}}
          {{~/if}}
          {{~raw-plugin-outlet name="topic-list-after-title"}}
          {{~raw "list/unread-indicator" includeUnreadIndicator=includeUnreadIndicator
                                       topicId=topic.id
                                       unreadClass=unreadClass~}}
          {{~#if showTopicPostBadges}}
          {{~raw "topic-post-badges" unread=topic.unread newPosts=topic.displayNewPosts unseen=topic.unseen url=topic.lastUnreadUrl newDotText=newDotText}}
          {{~/if}}
        </span>
        <div class="link-bottom-line">
          {{#unless hideCategory}}
            {{#unless topic.isPinnedUncategorized}}
              {{category-link topic.category}}
            {{/unless}}
          {{/unless}}
          {{discourse-tags topic mode="list" tagsForUser=tagsForUser}}
          {{raw "list/action-list" topic=topic postNumbers=topic.liked_post_numbers className="likes" icon="heart"}}
        </div>
        {{#if expandPinned}}
          {{raw "list/topic-excerpt" topic=topic}}
        {{/if}}
      </div>
    </div>
  </td>

  {{#if showPosters}}
    {{raw "list/posters-column" posters=topic.featuredUsers}}
  {{/if}}

  {{raw "list/posts-count-column" topic=topic}}

  {{#if showLikes}}
    <td class="num likes">
      {{#if hasLikes}}
        <a href='{{topic.summaryUrl}}'>
          {{d-icon "heart" className="d-icon-d-liked"}} {{number topic.like_count}}
        </a>
      {{/if}}
    </td>
  {{/if}}

  {{#if showOpLikes}}
    <td class="num likes">
      {{#if hasOpLikes}}
        <a href='{{topic.summaryUrl}}'>
          {{number topic.op_like_count}} {{d-icon "heart"}}
        </a>
      {{/if}}
    </td>
  {{/if}}

</script>

<script type="text/x-handlebars" data-template-name="list/posts-count-column.raw">
  <{{view.tagName}} class='num posts-map posts {{view.likesHeat}}' title='{{view.title}}'>
  <button class="btn-link posts-map badge-posts {{view.likesHeat}}">
    {{raw-plugin-outlet name="topic-list-before-reply-count"}}
    {{d-icon "far-comment"}} {{number topic.replyCount noTitle="true" ariaLabel=view.title}}
  </button>
</{{view.tagName}}>
</script>


<script type="text/x-handlebars" data-template-name="list/posters-column.raw">
  <td class='posters'>
{{#each posters as |poster|}}
  {{#if poster.moreCount}}
    <a class="posters-more-count">{{poster.moreCount}}</a>
  {{else}}
    <a href="{{poster.user.path}}" data-user-card="{{poster.user.username}}" class="{{poster.extraClasses}}">{{avatar poster avatarTemplatePath="user.avatar_template" usernamePath="user.username" namePath="user.name" imageSize="medium"}}</a>
  {{/if}}
{{/each}}
</td>
</script>

<script type='text/x-handlebars' data-template-name='/connectors/above-site-header/brand-header'>
  <div id="ember8" class="above-site-header-outlet brand-header ember-view">
  <div id="ember9" class="ember-view"><header class="b-header clearfix"><div class="wrap"><div class="contents clearfix"><div class="title"><a href="https://ministryoftesting.com"><img src="https://aws1.discourse-cdn.com/business7/uploads/ministryoftesting/original/2X/3/3650e1d805221d2a5444ca87c6adb4499d10169d.svg" alt="MoT" id="brand-logo" class="logo-big"></a></div><nav class="links"><ul class="nav nav-pills"></ul></nav><div class="panel clearfix"><ul class="icons clearfix"><li><a class="widget-link" href="https://www.ministryoftesting.com/dojo/catalog" title="Learn" target=""><svg class="fa d-icon d-icon-graduation-cap svg-icon svg-node" aria-hidden="true"><use xlink:href="#graduation-cap"></use></svg>Learn</a></li><li><a class="widget-link" href="https://ministryoftesting.com/events" title="Events" target=""><svg class="fa d-icon d-icon-calendar-alt svg-icon svg-node" aria-hidden="true"><use xlink:href="#calendar-alt"></use></svg>Events</a></li><li><a class="widget-link" href="https://club.ministryoftesting.com" title="Discussions" target=""><svg class="fa d-icon d-icon-comments svg-icon svg-node" aria-hidden="true"><use xlink:href="#comments"></use></svg>Discussions</a></li><li><a class="widget-link" href="https://www.ministryoftesting.com/contribute" title="Contribute" target=""><svg class="fa d-icon d-icon-pencil-alt svg-icon svg-node" aria-hidden="true"><use xlink:href="#pencil-alt"></use></svg>Contribute</a></li></ul></div></div></div></header></div>
  </div>
</script>

<script type="text/x-handlebars" data-template-name="components/categories-boxes">
  {{#each categories as |c|}}
    <div style={{unless noCategoryStyle (border-color c.color)}} data-category-id={{c.id}} data-notification-level={{c.notificationLevelString}} data-url={{c.url}}
      class="category category-box category-box-{{c.slug}} {{if c.isMuted "muted"}} {{if noCategoryStyle "no-category-boxes-style"}}">
      <div class="category-box-inner">
        {{#unless c.isMuted}}
          {{#if c.uploaded_logo.url}}
            <div class="category-logo">
              {{cdn-img
                src=c.uploaded_logo.url
                class="logo"
              }}
            </div>
          {{/if}}
        {{/unless}}
        <div class="category-details">
          <div class="category-box-heading">
            <a class="parent-box-link" href={{c.url}}>
              <h3>
                {{category-title-before category=c}}
                {{#if c.read_restricted}}
                  {{d-icon "lock"}}
                {{/if}}
                {{c.name}}
              </h3>
            </a>
          </div>

          {{#unless c.isMuted}}
            <div class="description">
              {{html-safe c.description_excerpt}}
            </div>
          {{/unless}}
        </div>
      </div>
    </div>
  {{/each}}
</script>

<script>
    let rss = `<use xlink:href="fa-brands.svg#twitter">
    let mdiSchool = `<path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"></path>`
    let logo = `<g xmlns="http://www.w3.org/2000/svg" fill="#0e1e2b">
    <path d="M77.4 196.2 c-8 -6.9 -11.4 -16.9 -11.4 -33.2 0.1 -20.9 2.4 -30.2 6.7 -27.4 2.9 1.8 4.3 9.4 5.4 28.9 0.9 16.5 1.4 19.8 3.6 25 1.3 3.3 2.5 6.7 2.6 7.5 0.3 2.6 -3.6 2.1 -6.9 -0.8z"/>
    <path d="M2.9 167.3 c-5.1 -6.1 11.2 -24.2 21.9 -24.3 2.6 0 2.7 1.1 0.6 5.5 -1.4 3 -12.6 13.5 -14.3 13.5 -0.4 0 -1.4 1.2 -2.1 2.6 -2 3.6 -4.5 4.8 -6.1 2.7z"/>
    <path d="M87.4 160.5 c-1.9 -1.9 -2.4 -3.4 -2.2 -5.8 0.4 -4.5 3.2 -4.7 7.4 -0.6 3.9 3.8 4.1 4.9 1.6 7.2 -2.5 2.3 -3.9 2.1 -6.8 -0.8z"/>
    <path d="M126.5 158.9 c-6 -3 -10 -7.4 -17 -18.6 -7.6 -12.2 -8.2 -13.8 -5.8 -15.2 2.8 -1.5 7.3 1.8 21.3 15.4 6.9 6.8 13.5 12.6 14.7 12.9 2.7 0.8 3.9 4.2 2.3 6.1 -1.8 2.2 -10.7 1.8 -15.5 -0.6z"/>
    <path d="M36.2 156.7 c-1.5 -1.8 -1.8 -7.8 -0.4 -10.3 1.9 -3.6 3.8 -4.7 6.1 -3.4 1.7 0.9 2.1 2 2.1 6.1 0 2.8 -0.5 5.9 -1 7 -1.2 2.2 -5.2 2.5 -6.8 0.6z"/>
    <path d="M121.5 116 c-0.8 -2.5 1.1 -5.1 3 -4.4 2 0.8 2.7 3.4 1.4 5 -1.7 2 -3.7 1.7 -4.4 -0.6z"/>
    <path d="M4.3 113 c-2.6 -1.1 -2.8 -1.9 -1 -4.4 1.5 -2 7.5 -2.9 9.5 -1.4 1.8 1.5 1.5 4.6 -0.7 5.8 -2.3 1.2 -4.8 1.2 -7.8 0z"/>
    <path d="M32.7 82 c-6.3 -4 -10.3 -9.9 -13.2 -19.4 -2.5 -8.8 -4 -24 -2.7 -29.5 0.9 -4.2 3.4 -6.1 6 -4.5 1.7 1.1 1.9 2 4.6 17.9 1.8 10.8 7.3 22.5 14.1 30.3 2.8 3.1 4.5 5.8 4.1 6.7 -1 2.6 -7.7 1.8 -12.9 -1.5z"/>
    <path d="M133.6 80.4 c-2.1 -2.1 -2 -2.9 0.6 -5.4 2.8 -2.6 6.6 -3.6 8.6 -2.3 2.5 1.5 2.4 2.9 -0.3 6.2 -2.9 3.4 -6.4 4 -8.9 1.5z"/>
    <path d="M93.3 73.3 c-2 -0.8 -1.6 -2.8 2.6 -11.1 7.1 -14.1 10.8 -19.4 22.7 -31.9 9.8 -10.5 12.1 -12.4 14.3 -12.1 1.5 0.2 2.7 1 2.9 2 0.6 3.2 -18 29.9 -29.4 42.1 -6 6.5 -11.1 11.7 -11.4 11.6 -0.3 0 -1.1 -0.3 -1.7 -0.6z"/>
    <path d="M61.7 56.2 c-2.7 -3 -3.3 -7.9 -1.2 -10.2 1 -1.1 2.4 -2 3.1 -2 2.1 0 4.4 4.2 4.4 8 0 5.6 -3.1 7.7 -6.3 4.2z"/>
    <path d="M96.2 18.8 c-4.2 -4.2 4 -19.3 8.8 -16.3 1.8 1.1 1 6.9 -1.7 12.2 -2.6 5.3 -4.7 6.5 -7.1 4.1z"/>
    </g>`

    const div = document.createElement("div")
    div.className = "sidebar-section-link-wrapper"
    div.innerHTML = `
            <a href="https://www.latranchee.com" class="sidebar-section-link sidebar-section-link-everything sidebar-row">
              <span class="sidebar-section-link-prefix icon">
                <svg viewBox="0 0 100 100" class="logoIcon" xmlns="http://www.w3.org/2000/svg">${logo}</svg>
              </span>
              <span class="sidebar-section-link-content-text"> Accueil </span>
            </a>
      `

    const customHeader = document.createElement("div")
    customHeader.className = "sidebar-section-wrapper sidebar-section-community"
    customHeader.innerHTML = `
            <div class="sidebar-section-header-wrapper sidebar-row">
              <button id="ember11" class="sidebar-section-header sidebar-section-header-collapsable btn-flat btn no-text" type="button">
                <span class="sidebar-section-header-text"> Camp d'entraînement </span>
              </button>
          </div>
          <ul class="sidebar-section-content" id="customNavigation"/>`

    $(document).ready(function () {
        // Create the links
        const links = [
            { title: "Accueil", src: "https://www.latranchee.com", svg: logo, viewbox: "0 0 100 100" },
            { title: "Formations", src: "https://www.latranchee.com/formations", svg: mdiSchool, viewbox: "2 -2 16 16" },
            { title: "Blogue", src: "https://www.latranchee.com/blogue", viewbox: "1 -3 16 16", svg: rss },
        ]

        // Mobile
        let hamburger = document.getElementById("toggle-hamburger-menu")
        if (hamburger) {
            hamburger.addEventListener("click", addCustomLinks)
        } else {
            addCustomLinks()
        }

        let bool = false;
        function addCustomLinks() {
            setTimeout(function () {
                // Force to wait until navigation has been loaded
                const sidebar = document.getElementsByClassName("sidebar-sections")[0]
                if (sidebar) {
                    sidebar.prepend(customHeader)
                    if (bool) return;
                    // Get the customNav Id
                    const customNavigation = document.getElementById("customNavigation")
                    if (customNavigation) {
                        links.filter(function (link) {
                            let linkDiv = document.createElement("li")
                            linkDiv.className = "sidebar-section-link-wrapper"
                            linkDiv.innerHTML = `<a href="${link.src}" class="sidebar-section-link sidebar-section-link-everything sidebar-row ember-view">
                        <span class="sidebar-section-link-prefix icon" id="link_${link.title}"></span>
                        <span class="sidebar-section-link-content-text"> ${link.title} </span>
                    </a>
                  `
                            customNavigation.append(linkDiv)
                            let linkIcon = document.getElementById("link_" + link.title)
                            if (linkIcon && link.svg) {
                                linkIcon.innerHTML = `<svg viewBox="${link.viewbox}" class="logoIcon" xmlns="http://www.w3.org/2000/svg"> ${link.svg}</svg>`
                            }
                        })
                    }
                }
                bool = true
            }, 0)

        }
    })
</script>
